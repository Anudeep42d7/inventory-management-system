{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Shoping Cart</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="{% static 'user/images/icons/favicon.png' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/vendor/bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/fonts/font-awesome-4.7.0/css/font-awesome.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/fonts/iconic/css/material-design-iconic-font.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/fonts/linearicons-v1.0.0/icon-font.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/vendor/animate/animate.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/vendor/css-hamburgers/hamburgers.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/vendor/animsition/css/animsition.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/vendor/select2/select2.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/vendor/daterangepicker/daterangepicker.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/vendor/slick/slick.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/vendor/MagnificPopup/magnific-popup.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/vendor/perfect-scrollbar/perfect-scrollbar.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/css/util.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'user/css/main.css' %}">
    <style>
        .card-header {
            background-color: #31708E;
            color: white;
            text-align: center;
            padding: 10px 0;
        }
        
        .card-logos {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .card-body {
            padding: 2rem;
        }
        
        .card-body label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .card-body input {
            width: 100%;
            padding: 10px;
            margin-bottom: 1rem;
            border: 1px solid #ced4da;
            border-radius: 5px;
        }
        
        .btn-success {
            background-color: #28a745;
            font-size: 1rem;
            width: 100%;
            padding: 10px;
            border-radius: 5px;
        }
        
        
        .flex-row {
            display: flex;
            justify-content: space-between;
        }
        
        .flex-col {
            flex: 1;
        }
        
        
        .flex-col:not(:last-child) {
            margin-right: 10px;
        }
        
        
        .card-images {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px; 
        }
        
        .card-images img {
            width: 36px; 
            height: 36px; 
            object-fit: contain;
        }
    </style>
</head>
<body class="animsition">
    
    <!-- Header -->
    <header class="header-v2">
        <!-- Header desktop -->
        <div class="container-menu-desktop trans-03">
            <div class="wrap-menu-desktop">
                <nav class="limiter-menu-desktop p-l-45">
                    
                    <!-- Logo desktop -->		
                    <a href="#" class="logo">
                        <h1 style="font-size: 27px;font-weight: bolder;"><span style="color: #0a0908;" >Inventory</span> Management</h1>
                    </a>
                    
                    <!-- Menu desktop -->
                    <div class="menu-desktop">
                        <ul class="main-menu">
                            <li>
                                <a href="{% url 'user_dashboard' %}">Dasboard</a>
                            </li>
                            
                            <li>
                                <a href="{% url 'user_explore' %}">Explore</a>
                            </li>
                            
                            <li>
                                <a href="">My Account </a>
                                <ul class="sub-menu">
                                    <li><a href="{% url 'my_purchases' %}">My purchases</a></li>
                                    <li><a href="{% url 'my_orders' %}" >MY Orders</a></li>
                                </ul>
                            </li>
                            
                            <li>
                                <a href="{% url 'my_profile' %}">My Profile </a>
                            </li>
                            
                            <li>
                                <a href="{% url 'user_logout' %}">Logout </a>
                            </li>
                            
                        </ul>
                    </div>	
                    
                    <!-- Icon header -->
                    <div class="wrap-icon-header flex-w flex-r-m h-full mr-5">
                        <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart mx-5" data-notify="{{ cart_item_count }}">
                            <a href="{% url 'cart' %}"><i class="zmdi zmdi-shopping-cart"></i></a>
                        </div>
                        <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-wishlist mr-4" data-notify="{{ wishlist_item_count }}">
                            <a href="{% url 'wishlist' %}"><i class="zmdi zmdi-favorite-outline"></i></a>
                        </div>
                        <!-- <a href="{% url 'seller_dashboard' %}" class="relative inline-block px-4 py-2 font-medium text-white bg-red-600 border border-gray-300 rounded-md hover:bg-indigo-600 hover:text-white hover:border-transparent focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 transition-all duration-300 ease-in-out">
                            Sell a Product
                        </a> -->
                    </div>
                </nav>
            </div>	
        </div>
        
        <!-- Header Mobile -->
        <div class="wrap-header-mobile">
            <!-- Logo moblie -->		
            <div class="logo-mobile">
                <a href="index.html"><h1 style="font-size: 27px;font-weight: bolder;"><span style="color: #0a0908;" >Inventory</span> Management</h1></a>
            </div>
            
            <!-- Icon header -->
            <div class="wrap-icon-header flex-w flex-r-m h-full m-r-15">
                <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti js-show-cart mx-2" data-notify="2">
                    <a href="{% url 'cart' %}"><i class="zmdi zmdi-shopping-cart"></i></a>
                </div>
                <a href="user-login.html" class="relative inline-block px-4 py-2 font-medium text-white bg-red-600 border border-gray-300 rounded-md hover:bg-indigo-600 hover:text-white hover:border-transparent focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 transition-all duration-300 ease-in-out">
                    LOGOUT
                </a>
                
            </div>
            
            <!-- Button show menu -->
            <div class="btn-show-menu-mobile hamburger hamburger--squeeze">
                <span class="hamburger-box">
                    <span class="hamburger-inner"></span>
                </span>
            </div>
        </div>
        
        
        <!-- Menu Mobile -->
        <div class="menu-mobile">
            <ul class="main-menu-m">
                <li>
                    <a href="user-dashboard.html">Home</a>
                </li>
                
                <li>
                    <a href="{% url 'user_explore' %}">Explore</a>
                </li>
                
                <li>
                    <a href="">My Account </a>
                    <ul class="sub-menu">
                        <li><a href="{% url 'my_purchases' %}">My purchases</a></li>
                        <li><a href="{% url 'my_orders' %}" >MY Orders</a></li>
                    </ul>
                </li>
                
                <li   class="active-menu">
                    <a href="{% url 'my_profile' %}">My Profile </a>
                </li>
                <li>
                    <a href="{% url 'user_logout' %}">Logout </a>
                </li>
            </ul>
        </div>
        
        <!-- Modal Search -->
        <div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
            <div class="container-search-header">
                <button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
                    <img src="{% static 'user/images/icons/icon-close2.png' %}" alt="CLOSE">
                    
                </button>
                
                <form class="wrap-search-header flex-w p-l-15">
                    <button class="flex-c-m trans-04">
                        <i class="zmdi zmdi-search"></i>
                    </button>
                    <input class="plh3" type="text" name="search" placeholder="Search...">
                </form>
            </div>
        </div>
    </header>
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.payment/3.0.0/jquery.payment.min.js"></script>
<div class="container-fluid d-flex justify-content-center">
    <div class="col-md-5 m-5">
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-md-6">
                        <span>CREDIT/DEBIT CARD PAYMENT</span>
                    </div>
                    <div class="col-md-6 text-right card-images">
                        <img src="https://img.icons8.com/color/36/000000/visa.png">
                        <img src="https://img.icons8.com/color/36/000000/mastercard.png">
                        <img src="https://img.icons8.com/color/36/000000/amex.png">
                    </div>
                </div>
            </div>
            <div class="card-body">
                <form action="" id="paymentForm">
                    <div class="form-group">
                        <label for="cc-number" class="control-label">CARD NUMBER</label>
                        <input id="cc-number" type="tel" class="input-lg form-control cc-number" autocomplete="cc-number" placeholder="&bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull;" required>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cc-exp" class="control-label">CARD EXPIRY</label>
                                <input id="cc-exp" type="tel" class="input-lg form-control cc-exp" autocomplete="cc-exp" placeholder="&bull;&bull; / &bull;&bull;" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cc-cvc" class="control-label">CARD CVC</label>
                                <input id="cc-cvc" type="tel" class="input-lg form-control cc-cvc" autocomplete="off" placeholder="&bull;&bull;&bull;&bull;" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="numeric" class="control-label">CARD HOLDER NAME</label>
                        <input type="text" id="card-holder-name" class="input-lg form-control" required>
                    </div>
                    <div class="form-group">
                        <button id="paymentButton" type="submit" class="btn btn-success btn-lg col-6 mx-auto d-block" style="font-size: 1rem; background-color: #2cc44f;">Make Payment</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    // Real-time validation for the Card Number field
    document.getElementById('cc-number').addEventListener('input', function(event) {
        var input = event.target.value.replace(/\D/g, ''); // Remove non-digit characters
        if (input.length > 16) {
            input = input.slice(0, 16); // Limit to 16 digits
        }
        event.target.value = input;
    });

    // Real-time validation for Expiry Date (MM/YY format)
    document.getElementById('cc-exp').addEventListener('input', function(event) {
        var input = event.target.value.replace(/\D/g, ''); // Remove non-digit characters
        if (input.length > 4) {
            input = input.slice(0, 4); // Limit to 4 digits (MMYY)
        }
        if (input.length >= 2) {
            input = input.slice(0, 2) + '/' + input.slice(2); // Add slash after MM
        }
        event.target.value = input;
    });

    // Real-time validation for CVC (3 or 4 digits)
    document.getElementById('cc-cvc').addEventListener('input', function(event) {
        var input = event.target.value.replace(/\D/g, ''); // Remove non-digit characters
        if (input.length > 4) {
            input = input.slice(0, 4); // Limit to 4 digits
        }
        event.target.value = input;
    });

    // Real-time validation for Cardholder Name (only letters and spaces)
    document.getElementById('card-holder-name').addEventListener('input', function(event) {
        var input = event.target.value.replace(/[^a-zA-Z\s]/g, ''); // Allow only alphabets and spaces
        event.target.value = input;
    });

    // Disable form submission if not all fields are correct
    document.getElementById('paymentButton').addEventListener('click', function(event) {
        // We no longer need additional validation, as real-time input validation is sufficient.
        // The form submission will only occur if the user has entered valid data as enforced by the real-time validation.

        // Display SweetAlert confirmation message
        Swal.fire({
            title: 'Are you sure?',
            text: 'Do you want to proceed with the payment?',
            icon: 'question',
            showCancelButton: true,
            confirmButtonText: 'Yes, proceed',
            cancelButtonText: 'Cancel'
        }).then((result) => {
            if (result.isConfirmed) {
                // Display payment completed message
                Swal.fire({
                    title: 'Payment Completed!',
                    text: 'Thank you for your payment.',
                    icon: 'success',
                    timer: 2000, // Show for 2 seconds
                    timerProgressBar: true,
                    showConfirmButton: false
                }).then(() => {
                    // Redirect to the Django URL
                    window.location.href = "{% url 'checkout' %}";
                });
            }
        });

        event.preventDefault(); // Prevent the default form submission (it's handled via the confirmation)
    });
</script>

    
    
    
    
    
    
    <!-- Footer -->
    <footer class="bg3 p-t-75 p-b-32">
        <div class="container">
            <div class="row container text-center">
                <div class="col-sm-6 col-lg-6 p-b-50">
                    <h4 class="stext-301 cl0 p-b-30">
                        links
                    </h4>
                    
                    <ul>
                        <li class="p-b-10">
                            <a href="{% url 'user_dashboard' %}" class="stext-107 cl7 hov-cl1 trans-04">
                                Dashboard
                            </a>
                        </li>
                        
                        <li class="p-b-10">
                            <a href="{% url 'user_explore' %}" class="stext-107 cl7 hov-cl1 trans-04">
                                Explore
                            </a>
                        </li>
                        
                        <li class="p-b-10">
                            <a href="{% url 'my_orders' %}" class="stext-107 cl7 hov-cl1 trans-04">
                                My-orders
                            </a>
                        </li>
                        
                        <li class="p-b-10">
                            <a href="{% url 'my_purchases' %}" class="stext-107 cl7 hov-cl1 trans-04">
                                My-purchases
                            </a>
                        </li>
                        <li class="p-b-10">
                            <a href="{% url 'my_profile' %}" class="stext-107 cl7 hov-cl1 trans-04">
                                My-profile
                            </a>
                        </li>
                    </ul>
                </div>
                
                
                
                <div class="col-sm-6 col-lg-6 p-b-50 text-center">
                    <h4 class="stext-301 cl0 p-b-30">
                        GET IN TOUCH
                    </h4>
                    
                    <div class="">
                        <p class="stext-107 cl7 size-201 mx-auto">
                            New Gayatri Nagar, Lb Nagar Hyderabad.
                        </p>
                    </div>
                    
                    <div class="p-t-27">
                        <a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
                            <i class="fa fa-facebook"></i>
                        </a>
                        
                        <a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
                            <i class="fa fa-instagram"></i>
                        </a>
                        
                        <a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
                            <i class="fa fa-pinterest-p"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="p-t-40">
                
                
                <p class="stext-107 cl6 txt-center">
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | Made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://codeleaf.in" target="_blank">codeleaf</a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    
                </p>
            </div>
        </div>
    </footer>
    
    
    <!-- Back to top -->
    <div class="btn-back-to-top" id="myBtn">
        <span class="symbol-btn-back-to-top">
            <i class="zmdi zmdi-chevron-up"></i>
        </span>
    </div>
    
    <script src="{% static 'user/vendor/jquery/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'user/vendor/animsition/js/animsition.min.js' %}"></script>
    <script src="{% static 'user/vendor/bootstrap/js/popper.js' %}"></script>
    <script src="{% static 'user/vendor/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'user/vendor/select2/select2.min.js' %}"></script>
    <script>
        $(".js-select2").each(function(){
            $(this).select2({
                minimumResultsForSearch: 20,
                dropdownParent: $(this).next('.dropDownSelect2')
            });
        })
    </script>
    <!--===============================================================================================-->
    <script src="{% static 'user/vendor/MagnificPopup/jquery.magnific-popup.min.js' %}"></script>
    <!--===============================================================================================-->
    <script src="{% static 'user/vendor/perfect-scrollbar/perfect-scrollbar.min.js' %}"></script>
    <script>
        $('.js-pscroll').each(function(){
            $(this).css('position','relative');
            $(this).css('overflow','hidden');
            var ps = new PerfectScrollbar(this, {
                wheelSpeed: 1,
                scrollingThreshold: 1000,
                wheelPropagation: false,
            });
            
            $(window).on('resize', function(){
                ps.update();
            })
        });
    </script>
    <!--===============================================================================================-->
    <script src="{% static 'user/js/main.js' %}"></script>
    
</body>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

{% if messages %}
{% for message in messages %}
{% if message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
<script>
    swal({
        title: "Warning!",
        text: "{{ message }}",
        icon: "warning",
        button: "OK",
    });
</script>
{% elif message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
<script>
    swal({
        title: "Info :)",
        text: "{{ message }}",
        icon: "info",
        button: "OK",
    });
</script>
{% elif message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
<script>
    swal({
        title: "Error :)",
        text: "{{ message }}",
        icon: "error",
        button: "OK",
    });
</script>
{% elif message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
<script>
    swal({
        title: "Success :)",
        text: "{{ message }}",
        icon: "success",
        button: "OK",
    });
</script>
{% endif %}
{% endfor %}
{% endif %}
</html>